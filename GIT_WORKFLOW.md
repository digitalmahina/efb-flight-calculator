# Git Workflow для EFB Calculator

## Структура веток

### Основные ветки
- **`main`** - основная ветка с рабочим кодом
- **`develop`** - ветка разработки для интеграции новых функций

### Ветки функций
- **`feature/weather-integration`** - интеграция погодных данных
- **`feature/ui-improvements`** - улучшения пользовательского интерфейса

## Рабочий процесс

### 1. Создание новой ветки для функции
```bash
# Переключиться на develop
git checkout develop

# Создать новую ветку
git checkout -b feature/название-функции

# Или создать ветку от main
git checkout -b feature/название-функции main
```

### 2. Работа с изменениями
```bash
# Добавить файлы в staging area
git add .

# Или добавить конкретные файлы
git add src/modules/new-module.js

# Проверить статус
git status

# Сделать коммит
git commit -m "Описание изменений"
```

### 3. Синхронизация с удаленным репозиторием
```bash
# Получить изменения с удаленного репозитория
git fetch origin

# Слить изменения из main в текущую ветку
git merge main

# Или перебазировать
git rebase main
```

### 4. Отправка изменений
```bash
# Отправить ветку в удаленный репозиторий
git push origin feature/название-функции

# Установить upstream для новой ветки
git push -u origin feature/название-функции
```

### 5. Слияние изменений
```bash
# Переключиться на main
git checkout main

# Слить изменения из feature ветки
git merge feature/название-функции

# Удалить локальную ветку после слияния
git branch -d feature/название-функции

# Удалить удаленную ветку
git push origin --delete feature/название-функции
```

## Правила коммитов

### Формат сообщений коммитов
```
тип(область): краткое описание

Подробное описание изменений (опционально)

Связанные задачи: #123
```

### Типы коммитов
- **feat** - новая функция
- **fix** - исправление ошибки
- **docs** - изменения в документации
- **style** - форматирование, отсутствующие точки с запятой и т.д.
- **refactor** - рефакторинг кода
- **test** - добавление тестов
- **chore** - изменения в процессе сборки, конфигурации и т.д.

### Примеры коммитов
```bash
git commit -m "feat(calculations): добавить расчет расхода топлива"
git commit -m "fix(weather): исправить ошибку загрузки погодных данных"
git commit -m "docs(readme): обновить инструкции по установке"
git commit -m "refactor(ui): оптимизировать компоненты интерфейса"
```

## Полезные команды

### Просмотр истории
```bash
# Краткая история
git log --oneline

# История с графиком веток
git log --oneline --graph --all

# История конкретного файла
git log --oneline -- src/modules/calculations.js
```

### Отмена изменений
```bash
# Отменить изменения в рабочей директории
git checkout -- файл.js

# Отменить последний коммит (сохранить изменения)
git reset --soft HEAD~1

# Отменить последний коммит (удалить изменения)
git reset --hard HEAD~1
```

### Работа с ветками
```bash
# Показать все ветки
git branch -a

# Переключиться на ветку
git checkout название-ветки

# Создать и переключиться на новую ветку
git checkout -b новая-ветка

# Удалить ветку
git branch -d название-ветки
```

### Синхронизация
```bash
# Получить все изменения
git fetch --all

# Слить изменения из удаленной ветки
git pull origin main

# Принудительно обновить локальную ветку
git reset --hard origin/main
```

## Настройка Git

### Глобальная конфигурация
```bash
# Установить имя пользователя
git config --global user.name "Ваше Имя"

# Установить email
git config --global user.email "your.email@example.com"

# Установить редактор по умолчанию
git config --global core.editor "code --wait"
```

### Конфигурация проекта
```bash
# Установить конфигурацию только для этого проекта
git config user.name "Ваше Имя"
git config user.email "your.email@example.com"
```

## Рекомендации

1. **Частые коммиты** - делайте коммиты часто с небольшими изменениями
2. **Описательные сообщения** - пишите понятные сообщения коммитов
3. **Синхронизация** - регулярно синхронизируйтесь с main веткой
4. **Тестирование** - тестируйте изменения перед коммитом
5. **Очистка** - удаляйте ветки после слияния

## Полезные алиасы

Добавьте в `~/.gitconfig`:
```ini
[alias]
    st = status
    co = checkout
    br = branch
    ci = commit
    unstage = reset HEAD --
    last = log -1 HEAD
    visual = !gitk
    graph = log --oneline --graph --all
    cleanup = "!git branch --merged | grep -v '\\*\\|main\\|develop' | xargs -n 1 git branch -d"
```
